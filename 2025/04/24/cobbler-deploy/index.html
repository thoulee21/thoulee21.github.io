<!DOCTYPE html>
<html lang="zh-cn">
    <head prefix="og: https://ogp.me/ns#">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  
  <title>Cobbler Deployment Practice - Matt&#39;s Weblog</title>
  
    <link rel="shortcut icon" href="/favicon.png">
  
  

  
  
  
  <meta property="og:title" content="Cobbler Deployment Practice - Matt&#39;s Weblog" />
  
  <meta property="og:type" content="article" />
  
  <meta property="og:url" content="https://thoulee21.github.io/2025/04/24/cobbler-deploy/index.html" />
  
  <meta property="og:image" content="/favicon.png" />
  
  <meta property="og:article:published_time" content="2025-04-24T05:29:44.000Z" />
  
  <meta property="og:article:author" content="Matt Lee" />
  
  

  
<link rel="stylesheet" href="/css/var.css">

  
<link rel="stylesheet" href="/css/main.css">

  
<link rel="stylesheet" href="/css/typography.css">

  
<link rel="stylesheet" href="/css/code-highlighting.css">

  
<link rel="stylesheet" href="/css/components.css">

  
<link rel="stylesheet" href="/css/nav.css">

  
<link rel="stylesheet" href="/css/paginator.css">

  
<link rel="stylesheet" href="/css/footer.css">

  
<link rel="stylesheet" href="/css/post-list.css">

  
  
  
<link rel="stylesheet" href="/css/toc.css">

  
  
    
<link rel="stylesheet" href="/css/giscus.css">

  
  
  
  
<link rel="stylesheet" href="/css/post.css">

  
  
  
  
  

  

  
  <script type="text/javascript">
  (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
  })(window, document, "clarity", "script", "r8yy6pojga");
</script>

  
<meta name="generator" content="Hexo 7.3.0"></head>
    <body
        data-color-scheme="auto"
        data-uppercase-categories="true"
        
        data-config-root="/"
        
        data-toc="true"
        data-toc-max-depth="2"
        
        
    >
        <nav id="theme-nav">
    <div class="inner">
        <a class="title" href="/">Matt&#39;s Weblog</a>
        <div class="nav-arrow"></div>
        <div class="nav-items">
            <a class="nav-item nav-item-home" href="/">主页</a>
            
            
            <a class="nav-item" href="/tags">Tags</a>
            
            
            
            <a class="nav-item" href="/categories">Categories</a>
            
            
            
            <a class="nav-item" href="/archives">Archives</a>
            
            
            
            <a class="nav-item" target="_blank" rel="noopener" href="http://thou.japaneast.cloudapp.azure.com/imgv">Imgv Web</a>
            
            
            
            <a class="nav-item nav-item-github nav-item-icon" href="https://github.com/thoulee21" target="_blank" aria-label="GitHub">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-search nav-item-icon" href="/search" target="_blank" aria-label="Search">&nbsp;</a>
            
            
        </div>
    </div>
</nav>
        
<article class="post">
    <div class="meta">
        
        <div class="categories text-uppercase">
        
            <a href="/categories/Server/">Server</a>
        
        </div>
        

        
        <div class="date" id="date">
            <span>April</span>
            <span>24,</span>
            <span>2025</span>
        </div>
        

        <h1 class="title">Cobbler Deployment Practice</h1>
    </div>

    <div class="divider"></div>

    <div class="content">
        <h1 id="部署-Cobbler-2-8-5"><a href="#部署-Cobbler-2-8-5" class="headerlink" title="部署 Cobbler 2.8.5"></a>部署 <a target="_blank" rel="noopener" href="http://cobbler.github.io/">Cobbler</a> 2.8.5</h1><h2 id="Cobbler-简介"><a href="#Cobbler-简介" class="headerlink" title="Cobbler 简介"></a>Cobbler 简介</h2><h3 id="Cobbler-作用"><a href="#Cobbler-作用" class="headerlink" title="Cobbler 作用"></a>Cobbler 作用</h3><p>Cobbler是Linux安装服务器可以快速设置网络安装环境、具备web管理界面</p>
<h3 id="ISO文件归档下载"><a href="#ISO文件归档下载" class="headerlink" title="ISO文件归档下载"></a>ISO文件归档下载</h3><ul>
<li><a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/centos-vault">https://mirrors.aliyun.com/centos-vault</a></li>
<li><a target="_blank" rel="noopener" href="http://dl.rockylinux.org/vault/rocky">http://dl.rockylinux.org/vault/rocky</a></li>
</ul>
<h2 id="部署前准备"><a href="#部署前准备" class="headerlink" title="部署前准备"></a>部署前准备</h2><blockquote>
<p>文章以CentOS7.9部署V2.8.5版本为例进行示范</p>
</blockquote>
<h3 id="cobbler2-8-5已经验证能够部署的系统"><a href="#cobbler2-8-5已经验证能够部署的系统" class="headerlink" title="cobbler2.8.5已经验证能够部署的系统"></a>cobbler2.8.5已经验证能够部署的系统</h3><ul>
<li>rhel6系列（已经验证OK）</li>
<li>rhel7系列（已经验证OK）</li>
<li>rhel8系列（已经验证OK）</li>
<li>rhel9系列（镜像文件是没有问题的，但是安装的时候会有报错，目前还未解决）</li>
</ul>
<h4 id="YUM源准备（必须有epel和Base源）"><a href="#YUM源准备（必须有epel和Base源）" class="headerlink" title="YUM源准备（必须有epel和Base源）"></a>YUM源准备（必须有epel和Base源）</h4><pre><code class="highlight shell">bash &lt;(curl -sSL https://linuxmirrors.cn/main.sh)</code></pre>

<h4 id="关闭防火墙和SELinux"><a href="#关闭防火墙和SELinux" class="headerlink" title="关闭防火墙和SELinux"></a>关闭防火墙和SELinux</h4><pre><code class="highlight shell">systemctl disable firewalld.service
systemctl stop firewalld.service
sed -i &#x27;s/^SELINUX=.*/SELINUX=disabled/g&#x27; /etc/selinux/config
<span class="meta prompt_"></span>
<span class="meta prompt_">#</span><span class="language-bash">关闭了selinux需要重启服务器生效</span>
reboot</code></pre>

<h2 id="Cobbler-部署"><a href="#Cobbler-部署" class="headerlink" title="Cobbler 部署"></a>Cobbler 部署</h2><h3 id="Cobbler-组件安装"><a href="#Cobbler-组件安装" class="headerlink" title="Cobbler 组件安装"></a>Cobbler 组件安装</h3><pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">Centos7（其余的软件会作为依赖安装）</span>
yum install -y dhcp tftp-server xinetd debmirror pykickstart cobbler cobbler-web</code></pre>

<h3 id="组件作用简介"><a href="#组件作用简介" class="headerlink" title="组件作用简介"></a>组件作用简介</h3><ul>
<li>cobbler     #基础组件</li>
<li>cobbler-web #web组件</li>
<li>debmirror   #镜像管理工具</li>
<li>pykickstart #检查cobbler配置文件语法</li>
<li>httpd       #发布镜像</li>
<li>syslinux    #配置引导文件（生成pxelinux.0）</li>
<li>tftp-server #为PXE的客户端提供引导文件</li>
<li>dhcp        #为PXE的客户端提供IP地址、告知tftp的服务地址</li>
</ul>
<h3 id="Cobbler-目录文件简介"><a href="#Cobbler-目录文件简介" class="headerlink" title="Cobbler 目录文件简介"></a>Cobbler 目录文件简介</h3><pre><code class="highlight shell">rpm -ql cobbler</code></pre>

<h4 id="Cobbler-目录文件结构"><a href="#Cobbler-目录文件结构" class="headerlink" title="Cobbler 目录文件结构"></a>Cobbler 目录文件结构</h4><table>
<thead>
<tr>
<th>目录&#x2F;文件路径</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>/etc/cobbler</code></td>
<td>配置文件目录</td>
</tr>
<tr>
<td><code>/etc/cobbler/settings</code></td>
<td>cobbler主配置文件</td>
</tr>
<tr>
<td><code>/etc/cobbler/dhcp.template</code></td>
<td>dhcp服务的配置模板</td>
</tr>
<tr>
<td><code>/etc/cobbler/tftpd.template</code></td>
<td>tftp服务的配置模板</td>
</tr>
<tr>
<td><code>/etc/cobbler/rsync.template</code></td>
<td>rsync服务的配置模板</td>
</tr>
<tr>
<td><code>/etc/cobbler/iso</code></td>
<td>iso模板配置文件目录</td>
</tr>
<tr>
<td><code>/etc/cobbler/pxe</code></td>
<td>pxe模板文件目录</td>
</tr>
<tr>
<td><code>/etc/cobbler/power</code></td>
<td>电源的配置文件目录</td>
</tr>
<tr>
<td><code>/etc/cobbler/users.conf</code></td>
<td>web服务授权配置文件</td>
</tr>
<tr>
<td><code>/etc/cobbler/users.digest</code></td>
<td>用于web访问的用户名密码配置文件</td>
</tr>
<tr>
<td><code>/etc/cobbler/dnsmasq.template</code></td>
<td>dns服务的配置模板</td>
</tr>
<tr>
<td><code>/etc/cobbler/modules.conf</code></td>
<td>cobbler模块配置文件</td>
</tr>
<tr>
<td><code>/var/lib/cobbler</code></td>
<td>cobbler数据目录</td>
</tr>
<tr>
<td><code>/var/lib/cobbler/config</code></td>
<td>配置文件</td>
</tr>
<tr>
<td><code>/var/lib/cobbler/kickstarts</code></td>
<td>默认存放kickstart文件</td>
</tr>
<tr>
<td><code>/var/lib/cobbler/loaders</code></td>
<td>存放的各种引导程序</td>
</tr>
<tr>
<td><code>/var/www/cobbler</code></td>
<td>系统安装镜像目录</td>
</tr>
<tr>
<td><code>/var/www/cobbler/ks_mirror</code></td>
<td>导入的系统镜像列表</td>
</tr>
<tr>
<td><code>/var/www/cobbler/images</code></td>
<td>导入的系统镜像启动文件</td>
</tr>
<tr>
<td><code>/var/www/cobbler/repo_mirror</code></td>
<td>YUM源存储目录</td>
</tr>
<tr>
<td><code>/var/log/cobbler</code></td>
<td>日志目录</td>
</tr>
<tr>
<td><code>/var/log/cobbler/install.log</code></td>
<td>客户端系统安装日志</td>
</tr>
<tr>
<td><code>/var/log/cobbler/cobbler.log</code></td>
<td>cobbler日志</td>
</tr>
</tbody></table>
<hr>
<h3 id="Cobbler-主配置文件修改"><a href="#Cobbler-主配置文件修改" class="headerlink" title="Cobbler 主配置文件修改"></a>Cobbler 主配置文件修改</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">生成密文密码</span></span><br><span class="line">openssl passwd -1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置root密码</span></span><br><span class="line">sed -i &#x27;s|^default_password_crypted.*|default_password_crypted: &quot;$1$Nrt/tXCR$BrRthh4tFphGyCunrGWzi/&quot;|g&#x27; /etc/cobbler/settings</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置指定tftp服务IP地址</span></span><br><span class="line">sed -i &#x27;s|^next_server.*|next_server: 192.168.200.10|g&#x27; /etc/cobbler/settings</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置cobbler服务地址</span></span><br><span class="line">sed -i &#x27;s|^server.*|server: 192.168.200.10|g&#x27; /etc/cobbler/settings</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">cobbler接管dhcp（0为关闭 1为开启）</span></span><br><span class="line">sed -i &#x27;s|^manage_dhcp.*|manage_dhcp: 0|g&#x27; /etc/cobbler/settings</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">cobbler接管tftp（0为关闭 1为开启）</span></span><br><span class="line">sed -i &#x27;s|^manage_tftpd.*|manage_tftpd: 1|g&#x27; /etc/cobbler/settings</span><br><span class="line">      </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">cobbler启动服务</span></span><br><span class="line">systemctl enable --now httpd.service</span><br><span class="line">systemctl enable --now cobblerd.service</span><br></pre></td></tr></table></figure>
<blockquote>
<p>cobbler可以将自身作为dhcp服务器为安装系统的客户端分发IP地址、也可以使用已有的dhcp服务器，为了首次同步成功这里统一将cobbler接管dhcp的功能暂时关闭</p>
</blockquote>
<h3 id="Cobbler-首次检查"><a href="#Cobbler-首次检查" class="headerlink" title="Cobbler 首次检查"></a>Cobbler 首次检查</h3><blockquote>
<p>可能每人的报错问题不同此处列举我的报错问题</p>
</blockquote>
<pre><code class="highlight shell">cobbler check</code></pre>

<pre><code class="highlight basic"><span class="symbol">1 </span>: change <span class="comment">&#x27;disable&#x27; to &#x27;no&#x27; in /etc/xinetd.d/tftp</span>
<span class="symbol">2 </span>: Some network boot-loaders are missing from /var/lib/cobbler/loaders, you may <span class="keyword">run</span> <span class="comment">&#x27;cobbler get-loaders&#x27; to download them, or, if you only want to handle x86/x86_64 netbooting, you may ensure that you have installed a *recent* version of the syslinux package installed and can ignore this message entirely.  Files in this directory, should you want to support all architectures, should include pxelinux.0, menu.c32, elilo.efi, and yaboot. The &#x27;cobbler get-loaders&#x27; command is the easiest way to resolve these requirements. #可以忽略（确保系统已经安装pxelinux）</span>
<span class="symbol">3 </span>: enable <span class="keyword">and</span> start rsyncd.service with systemctl
<span class="symbol">4 </span>: comment <span class="keyword">out</span> <span class="comment">&#x27;dists&#x27; on /etc/debmirror.conf for proper debian support</span>
<span class="symbol">5 </span>: comment <span class="keyword">out</span> <span class="comment">&#x27;arches&#x27; on /etc/debmirror.conf for proper debian support</span>
<span class="symbol">6 </span>: fencing tools were <span class="keyword">not</span> found, <span class="keyword">and</span> are required <span class="keyword">to</span> use the (optional) power management features. install cman <span class="keyword">or</span> fence-agents <span class="keyword">to</span> use them #可以忽略</code></pre>

<h3 id="解决-Cobbler-检查报错"><a href="#解决-Cobbler-检查报错" class="headerlink" title="解决 Cobbler 检查报错"></a>解决 Cobbler 检查报错</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">报错1问题解决</span></span><br><span class="line">cat &lt;&lt; EOF | tee /etc/xinetd.d/tftp</span><br><span class="line">service tftp</span><br><span class="line">&#123;</span><br><span class="line">        socket_type             = dgram</span><br><span class="line">        protocol                = udp</span><br><span class="line">        wait                    = yes </span><br><span class="line">        user                    = root</span><br><span class="line">        server                  = /usr/sbin/in.tftpd</span><br><span class="line">        server_args             = -s /var/lib/tftpboot</span><br><span class="line">        disable                 = no</span><br><span class="line">        per_source              = 11</span><br><span class="line">        cps                     = 100 2</span><br><span class="line">        flags                   = IPv4</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">报错3问题解决</span></span><br><span class="line">systemctl enable --now rsyncd.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">报错4、5问题解决</span></span><br><span class="line">sed -i &#x27;s|@dists=.*|# @dists=|&#x27; /etc/debmirror.conf </span><br><span class="line">sed -i &#x27;s|@arches=.*|# @arches=|&#x27; /etc/debmirror.conf</span><br></pre></td></tr></table></figure>

<h3 id="Cobbler-首次同步"><a href="#Cobbler-首次同步" class="headerlink" title="Cobbler 首次同步"></a>Cobbler 首次同步</h3><pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">再次运行检查</span>
cobbler check</code></pre>

<pre><code class="highlight basic"><span class="symbol">1 </span>: Some network boot-loaders are missing from /var/lib/cobbler/loaders, you may <span class="keyword">run</span> <span class="comment">&#x27;cobbler get-loaders&#x27; to download them, or, if you only want to handle x86/x86_64 netbooting, you may ensure that you have installed a *recent* version of the syslinux package installed and can ignore this message entirely.  Files in this directory, should you want to support all architectures, should include pxelinux.0, menu.c32, elilo.efi, and yaboot. The &#x27;cobbler get-loaders&#x27; command is the easiest way to resolve these requirements.</span>
<span class="symbol">2 </span>: fencing tools were <span class="keyword">not</span> found, <span class="keyword">and</span> are required <span class="keyword">to</span> use the (optional) power management features. install cman <span class="keyword">or</span> fence-agents <span class="keyword">to</span> use them</code></pre>

<pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">cobbler首次同步</span>
cobbler sync</code></pre>

<h2 id="配置-DHCP-服务"><a href="#配置-DHCP-服务" class="headerlink" title="配置 DHCP 服务"></a>配置 DHCP 服务</h2><h3 id="Cobbler-接管-DHCP"><a href="#Cobbler-接管-DHCP" class="headerlink" title="Cobbler 接管 DHCP"></a>Cobbler 接管 DHCP</h3><pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">修改dhcp模板文件</span>
vim /etc/cobbler/dhcp.template</code></pre>

<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">subnet <span class="number">192.168</span><span class="number">.200</span>.<span class="number">0</span> netmask <span class="number">255.255</span><span class="number">.255</span>.<span class="number">0</span> &#123;</span><br><span class="line">     option routers             <span class="number">192.168</span><span class="number">.200</span>.<span class="number">2</span>;</span><br><span class="line">     option domain-name-servers <span class="number">223.5</span>.<span class="number">5.5</span>;</span><br><span class="line">     option subnet-mask         <span class="number">255.255</span><span class="number">.225</span>.<span class="number">0</span>;</span><br><span class="line">     range dynamic-bootp        <span class="number">192.168</span><span class="number">.200</span><span class="number">.200</span> <span class="number">192.168</span><span class="number">.200</span><span class="number">.250</span>;</span><br><span class="line">     default-lease-<span class="keyword">time</span>         <span class="number">7200</span>;</span><br><span class="line">     max-lease-<span class="keyword">time</span>             <span class="number">7200</span>;</span><br><span class="line">     <span class="keyword">next</span>-server                <span class="variable">$next_server</span>;   </span><br><span class="line">     <span class="class"><span class="keyword">class</span> &quot;<span class="title">pxeclients</span>&quot; </span>&#123;</span><br><span class="line">          match <span class="keyword">if</span> substring (option vendor-<span class="class"><span class="keyword">class</span>-<span class="title">identifier</span>, <span class="number">0</span>, <span class="number">9</span>) = &quot;<span class="title">PXEClient</span>&quot;</span>;</span><br><span class="line">          <span class="keyword">if</span> option pxe-<span class="keyword">system</span>-type = <span class="number">00</span>:<span class="number">02</span> &#123;</span><br><span class="line">                  filename <span class="string">&quot;ia64/elilo.efi&quot;</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> option pxe-<span class="keyword">system</span>-type = <span class="number">00</span>:<span class="number">06</span> &#123;</span><br><span class="line">                  filename <span class="string">&quot;grub/grub-x86.efi&quot;</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> option pxe-<span class="keyword">system</span>-type = <span class="number">00</span>:<span class="number">07</span> &#123;</span><br><span class="line">                  filename <span class="string">&quot;grub/grub-x86_64.efi&quot;</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> option pxe-<span class="keyword">system</span>-type = <span class="number">00</span>:09 &#123;</span><br><span class="line">                  filename <span class="string">&quot;grub/grub-x86_64.efi&quot;</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  filename <span class="string">&quot;pxelinux.0&quot;</span>;</span><br><span class="line">          &#125;</span><br><span class="line">     &#125;</span><br><span class="line">    <span class="comment">#option dhcp-server-identifier 192.168.200.2;  #生产内现有的DHCP服务器</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">cobbler主配置文件开启dhcp接管</span>
sed -i &#x27;s|^manage_dhcp.*|manage_dhcp: 1|g&#x27; /etc/cobbler/settings 
<span class="meta prompt_"></span>
<span class="meta prompt_">#</span><span class="language-bash">重新同步</span>
systemctl restart cobblerd.service
cobbler sync  
<span class="meta prompt_"></span>
<span class="meta prompt_">#</span><span class="language-bash">启动dhcp服务</span>
systemctl enable --now dhcpd.service 
systemctl restart dhcpd.service</code></pre>

<h3 id="使用现有-DHCP-服务器"><a href="#使用现有-DHCP-服务器" class="headerlink" title="使用现有 DHCP 服务器"></a>使用现有 DHCP 服务器</h3><pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">修改dhcp配置文件</span>
vim /etc/dhcp/dhcpd.conf</code></pre>

<pre><code class="highlight pgsql">subnet <span class="number">192.168</span><span class="number">.200</span><span class="number">.0</span> netmask <span class="number">255.255</span><span class="number">.225</span><span class="number">.0</span> &#123;
     <span class="keyword">option</span> routers             <span class="number">192.168</span><span class="number">.200</span><span class="number">.2</span>;
     <span class="keyword">option</span> <span class="keyword">domain</span>-<span class="type">name</span>-servers <span class="number">223.5</span><span class="number">.5</span><span class="number">.5</span>;
     <span class="keyword">option</span> subnet-mask         <span class="number">255.255</span><span class="number">.225</span><span class="number">.0</span>;
     range dynamic-bootp        <span class="number">192.168</span><span class="number">.200</span><span class="number">.2</span> <span class="number">192.168</span><span class="number">.200</span><span class="number">.200</span>;
     <span class="keyword">default</span>-lease-<span class="type">time</span>         <span class="number">600</span>;
     next-<span class="keyword">server</span> <span class="number">192.168</span><span class="number">.200</span><span class="number">.10</span>;  #指定cobbler服务器为tftp服务器
     filename &quot;pxelinux.0&quot;;       #指定启动文件名称
     max-lease-<span class="type">time</span> <span class="number">7200</span>;
&#125;</code></pre>

<pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">启动dhcp服务</span>
systemctl enable --now dhcpd.service 
systemctl restart dhcpd.service</code></pre>

<h2 id="其他相关服务配置"><a href="#其他相关服务配置" class="headerlink" title="其他相关服务配置"></a>其他相关服务配置</h2><h3 id="配置-TFTP-服务"><a href="#配置-TFTP-服务" class="headerlink" title="配置 TFTP 服务"></a>配置 TFTP 服务</h3><pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">确保tftp的站点目录存在引导文件（cobbler检查问题的过程中已经修了tftp的配置文件）</span>
ll /var/lib/tftpboot/</code></pre>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">drwxr-xr-x <span class="number"> 3 </span>root root  <span class="number"> 4096 </span>Mar <span class="number"> 1 </span>23:54 boot</span><br><span class="line">drwxr-xr-x.<span class="number"> 2 </span>root root  <span class="number"> 4096 </span>Oct<span class="number"> 15 </span><span class="number"> 2019 </span>etc</span><br><span class="line">drwxr-xr-x.<span class="number"> 2 </span>root root  <span class="number"> 4096 </span>Mar <span class="number"> 1 </span>23:54 grub  <span class="comment">#UEFI启动菜单目录</span></span><br><span class="line">drwxr-xr-x.<span class="number"> 7 </span>root root  <span class="number"> 4096 </span>Mar <span class="number"> 1 </span>23:54 images</span><br><span class="line">drwxr-xr-x.<span class="number"> 2 </span>root root  <span class="number"> 4096 </span>Oct<span class="number"> 15 </span><span class="number"> 2019 </span>images2</span><br><span class="line">-rw-r--r--.<span class="number"> 2 </span>root root <span class="number"> 26140 </span>Oct<span class="number"> 31 </span><span class="number"> 2018 </span>memdisk</span><br><span class="line">-rw-r--r--.<span class="number"> 2 </span>root root <span class="number"> 54964 </span>Mar <span class="number"> 1 </span>23:54 menu.c32</span><br><span class="line">drwxr-xr-x.<span class="number"> 2 </span>root root  <span class="number"> 4096 </span>Oct<span class="number"> 15 </span><span class="number"> 2019 </span>ppc</span><br><span class="line">-rw-r--r--.<span class="number"> 2 </span>root root <span class="number"> 16794 </span>Mar <span class="number"> 1 </span>23:54 pxelinux.0</span><br><span class="line">drwxr-xr-x.<span class="number"> 2 </span>root root  <span class="number"> 4096 </span>Mar <span class="number"> 1 </span>23:56 pxelinux.cfg <span class="comment">#BIOS启动菜单目录</span></span><br><span class="line">drwxr-xr-x.<span class="number"> 2 </span>root root  <span class="number"> 4096 </span>Mar <span class="number"> 1 </span>23:54 s390x</span><br><span class="line">-rw-r--r-- <span class="number"> 2 </span>root root<span class="number"> 198236 </span>Feb <span class="number"> 8 </span>15:17 yaboot</span><br></pre></td></tr></table></figure>

<pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">启动tftp服务</span>
systemctl enable --now tftp.service  
systemctl enable --now xinetd.service
systemctl restart tftp.service 
systemctl restart xinetd.service</code></pre>

<h3 id="客户端测试访问"><a href="#客户端测试访问" class="headerlink" title="客户端测试访问"></a>客户端测试访问</h3><p><img src="http://pic.swireb.cn/images/image-20210301152228267.png" alt="客户端测试访问"></p>
<h3 id="系统镜像挂载"><a href="#系统镜像挂载" class="headerlink" title="系统镜像挂载"></a>系统镜像挂载</h3><h4 id="Ubuntu镜像注意事项"><a href="#Ubuntu镜像注意事项" class="headerlink" title="Ubuntu镜像注意事项"></a>Ubuntu镜像注意事项</h4><p>不支持desktop、live版本（仅支持LTS server version版本）<br/><br>推荐ubuntu-18.04-server-amd64</p>
<h4 id="使用光驱加载Centos7的系统镜像"><a href="#使用光驱加载Centos7的系统镜像" class="headerlink" title="使用光驱加载Centos7的系统镜像"></a>使用光驱加载Centos7的系统镜像</h4><pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">为后续cobble导入镜像做准备</span>
mount -t iso9660 -o loop,ro /dev/cdrom /mnt</code></pre>

<h2 id="Cobbler-使用"><a href="#Cobbler-使用" class="headerlink" title="Cobbler 使用"></a>Cobbler 使用</h2><h3 id="Cobbler-命令语法"><a href="#Cobbler-命令语法" class="headerlink" title="Cobbler 命令语法"></a>Cobbler 命令语法</h3><pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">命令语法</span>
cobbler --help
cobbler &lt;distro|profile|system|repo|image|mgmtclass|package|file&gt; ... 
        [add|edit|copy|getks*|list|remove|rename|report] [options|--help]
cobbler &lt;aclsetup|buildiso|import|list|replicate|report|reposync|sync|validateks|version|signature|get-loaders|hardlink&gt; [options|--help]</code></pre>

<h3 id="Cobbler-导入镜像"><a href="#Cobbler-导入镜像" class="headerlink" title="Cobbler 导入镜像"></a>Cobbler 导入镜像</h3><h4 id="命令语法"><a href="#命令语法" class="headerlink" title="命令语法"></a>命令语法</h4><pre><code class="highlight shell">cobbler import --help</code></pre>

<pre><code class="highlight routeros">Usage: cobbler import [options]
Options:
  <span class="attribute">--arch</span>=ARCH           镜像架构
  <span class="attribute">--path</span>=PATH           镜像导入路径
  <span class="attribute">--name</span>=NAME           镜像名称</code></pre>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">命令操作</span></span><br><span class="line">cobbler import --name=CentOS7.9 --path=/mnt</span><br><span class="line">cobbler import --name=Rocky8.4 --path=/mnt</span><br><span class="line">cobbler import --name=Rocky8.5 --path=/mnt</span><br><span class="line">cobbler import --name=Rocky8.6 --path=/mnt</span><br><span class="line">cobbler import --name=Rocky8.7 --path=/mnt</span><br><span class="line">cobbler import --name=Rocky8.8 --path=/mnt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">注意cobbler2.8.5导入rhel9系列的镜像文件是没有问题的，但是安装的时候会有报错（目前还未解决）</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">列出对象</span></span><br><span class="line">cobbler distro list</span><br><span class="line">cobbler profile list</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">列出对象详细信息</span></span><br><span class="line">cobbler distro report --name=CentOS7.9-x86_64</span><br></pre></td></tr></table></figure>

<h4 id="导入镜像的过程"><a href="#导入镜像的过程" class="headerlink" title="导入镜像的过程"></a>导入镜像的过程</h4><p>将光盘文件复制到<code>/var/www/cobbler/ks_mirror</code>目录下<br>并且自动生成apache的一个子配置文件<code>/etc/httpd/conf.d/cobbler.conf</code>将镜像发布出去<br><code>http://IP/cobbler/</code></p>
<p>导入Cent0S6和CentOS7导入无异常<br>导入CentOS8的镜像会报错解决办法在文章下方cobbler导入镜像失败<br>导入Ubuntu 18.04之后的版本也是导入失败（非LTS版本可能支持的不友好）</p>
<h3 id="CentOS-系统-KS-模板文件"><a href="#CentOS-系统-KS-模板文件" class="headerlink" title="CentOS 系统 KS 模板文件"></a>CentOS 系统 KS 模板文件</h3><pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">备份默认ks</span>
mv /var/lib/cobbler/kickstarts/sample_end.ks /var/lib/cobbler/kickstarts/sample_end.ks.bak
<span class="meta prompt_"></span>
<span class="meta prompt_">#</span><span class="language-bash">适配RHEL系列</span>
curl -L https://drive.swireb.cn/d/Linux/Cobbler/v2.8.5/ks/sample_end.ks &gt; /var/lib/cobbler/kickstarts/sample_end.ks</code></pre>

<p><a target="_blank" rel="noopener" href="http://www.hellokvm.com/?p=476">磁盘分区方案</a></p>
<h3 id="Ubuntu-系统-KS-模板文件"><a href="#Ubuntu-系统-KS-模板文件" class="headerlink" title="Ubuntu 系统 KS 模板文件"></a>Ubuntu 系统 KS 模板文件</h3><pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">备份默认ks</span>
mv /var/lib/cobbler/kickstarts/sample.seed /var/lib/cobbler/kickstarts/sample.seed.bak
<span class="meta prompt_"></span>
<span class="meta prompt_">#</span><span class="language-bash">适配Ubuntu18.04其余版本</span>
curl -L https://drive.swireb.cn/d/Linux/Cobbler/v2.8.5/ks/sample.seed &gt; /var/lib/cobbler/kickstarts/sample.seed</code></pre>

<h4 id="Ubuntu系统配置软件源模板文件"><a href="#Ubuntu系统配置软件源模板文件" class="headerlink" title="Ubuntu系统配置软件源模板文件"></a>Ubuntu系统配置软件源模板文件</h4><pre><code class="highlight shell">vim /var/lib/cobbler/snippets/late_apt_repo_config</code></pre>

<pre><code class="highlight shell">cat &gt;/etc/apt/sources.list&lt;&lt;EOF
deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
EOF</code></pre>

<h4 id="允许-root-用户-SSH-登录"><a href="#允许-root-用户-SSH-登录" class="headerlink" title="允许 root 用户 SSH 登录"></a>允许 root 用户 SSH 登录</h4><pre><code class="highlight shell">sed -i &#x27;s|.*PermitRootLogin.*|PermitRootLogin yes|g&#x27; /etc/ssh/sshd_config &amp;&amp; service ssh start</code></pre>

<h4 id="安装Ubuntu系统之后执行的脚本模板文件"><a href="#安装Ubuntu系统之后执行的脚本模板文件" class="headerlink" title="安装Ubuntu系统之后执行的脚本模板文件"></a>安装Ubuntu系统之后执行的脚本模板文件</h4><pre><code class="highlight shell">vim /var/lib/cobbler/scripts/preseed_late_default</code></pre>
<pre><code class="highlight shell"><span class="meta prompt_">$</span><span class="language-bash">SNIPPET(<span class="string">&#x27;post_run_deb&#x27;</span>)</span></code></pre>

<h2 id="Cobbler-配置启动菜单"><a href="#Cobbler-配置启动菜单" class="headerlink" title="Cobbler 配置启动菜单"></a>Cobbler 配置启动菜单</h2><h3 id="客户端配置"><a href="#客户端配置" class="headerlink" title="客户端配置"></a>客户端配置</h3><p><img src="http://pic.swireb.cn/images/image-20210302000400700.png" alt="客户端配置"></p>
<h3 id="服务端配置-BIOS-启动菜单"><a href="#服务端配置-BIOS-启动菜单" class="headerlink" title="服务端配置 BIOS 启动菜单"></a>服务端配置 BIOS 启动菜单</h3><h4 id="修改启动菜单配置文件"><a href="#修改启动菜单配置文件" class="headerlink" title="修改启动菜单配置文件"></a>修改启动菜单配置文件</h4><pre><code class="highlight shell">vim /etc/cobbler/pxe/pxedefault.template</code></pre>
<pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">LABEL <span class="built_in">local</span></span>
<span class="meta prompt_"># </span><span class="language-bash">       MENU LABEL (<span class="built_in">local</span>)</span>
<span class="meta prompt_"># </span><span class="language-bash">       MENU DEFAULT</span>
<span class="meta prompt_"># </span><span class="language-bash">       LOCALBOOT -1</span></code></pre>

<pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">cobbler重新同步</span>
cobbler sync</code></pre>

<h3 id="服务端配置-UEFI-启动菜单"><a href="#服务端配置-UEFI-启动菜单" class="headerlink" title="服务端配置 UEFI 启动菜单"></a>服务端配置 UEFI 启动菜单</h3><pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">手动下载UEFI启动的相关文件</span>
wget https://drive.swireb.cn/d/Linux/Cobbler/v2.8.5/grub.tar.gz

tar xf grub.tar.gz -C /var/lib/cobbler/loaders
<span class="meta prompt_"></span>
<span class="meta prompt_">#</span><span class="language-bash">命令下载UEFI启动的相关文件（V2.8.5版本此命令已经失效）</span>
cobbler get-loaders</code></pre>

<h4 id="修改启动菜单配置文件-1"><a href="#修改启动菜单配置文件-1" class="headerlink" title="修改启动菜单配置文件"></a>修改启动菜单配置文件</h4><pre><code class="highlight shell">vim /etc/cobbler/pxe/efidefault.template</code></pre>
<pre><code class="highlight ini"><span class="attr">timeout</span>=<span class="number">6000</span>  <span class="comment">#修改启动菜单加时间（必须修改不然一闪则过）</span></code></pre>

<h4 id="cobbler-重新同步"><a href="#cobbler-重新同步" class="headerlink" title="cobbler 重新同步"></a>cobbler 重新同步</h4><pre><code class="highlight shell">cobbler sync</code></pre>

<h2 id="Cobbler-配置-Web-管理界面"><a href="#Cobbler-配置-Web-管理界面" class="headerlink" title="Cobbler 配置 Web 管理界面"></a>Cobbler 配置 Web 管理界面</h2><h3 id="访问地址（必须为https）"><a href="#访问地址（必须为https）" class="headerlink" title="访问地址（必须为https）"></a>访问地址（必须为<em>https</em>）</h3><p><a target="_blank" rel="noopener" href="https://ip/cobbler_web">https://ip/cobbler_web</a></p>
<h3 id="默认访问用户"><a href="#默认访问用户" class="headerlink" title="默认访问用户"></a>默认访问用户</h3><ul>
<li>用户: cobbler</li>
<li>密码: cobbler</li>
</ul>
<h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><pre><code class="highlight awk"><span class="regexp">/etc/</span>cobbler/users.conf       <span class="comment">#web服务授权配置文件</span>
<span class="regexp">/etc/</span>cobbler/users.digest     <span class="comment">#用于web访问的用户名密码配置文件</span></code></pre>

<p><img src="http://pic.swireb.cn/images/image-20210302002442859.png" alt="Cobbler Web界面"></p>
<h2 id="Cobbler-导入镜像失败"><a href="#Cobbler-导入镜像失败" class="headerlink" title="Cobbler 导入镜像失败"></a>Cobbler 导入镜像失败</h2><h3 id="故障示意图"><a href="#故障示意图" class="headerlink" title="故障示意图"></a>故障示意图</h3><p><img src="http://pic.swireb.cn/images/image-20210302150753759.png" alt="故障示意图"></p>
<h3 id="主要还是应为签名文件中不包括导入的系统镜像"><a href="#主要还是应为签名文件中不包括导入的系统镜像" class="headerlink" title="主要还是应为签名文件中不包括导入的系统镜像"></a>主要还是应为签名文件中不包括导入的系统镜像</h3><pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">更新签名文件</span>
cobbler signature report #列出
cobbler signature update #更新
<span class="meta prompt_"></span>
<span class="meta prompt_">#</span><span class="language-bash">直接下载签名文件</span>
curl -L https://cobbler.github.io/signatures/2.8.x/latest.json &gt; /var/lib/cobbler/distro_signatures.json</code></pre>

<h3 id="CentOS-Stream-解决办法"><a href="#CentOS-Stream-解决办法" class="headerlink" title="CentOS-Stream 解决办法"></a>CentOS-Stream 解决办法</h3><pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">在rhel8的version_file键值对中添加centos-linux-release centos-stream-release</span>
vim /var/lib/cobbler/distro_signatures.json</code></pre>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;rhel8&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;signatures&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;BaseOS&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version_file&quot;</span><span class="punctuation">:</span><span class="string">&quot;(redhat|sl|slf|centos|centos-linux|centos-stream|oraclelinux|vzlinux)-release-(?!notes)([\\w]*-)*8(Server)*[\\.-]+(.*)\\.rpm&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version_file_regex&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_arch&quot;</span><span class="punctuation">:</span><span class="string">&quot;kernel-(.*).rpm&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_arch_regex&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;supported_arches&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;aarch64&quot;</span><span class="punctuation">,</span><span class="string">&quot;i386&quot;</span><span class="punctuation">,</span><span class="string">&quot;x86_64&quot;</span><span class="punctuation">,</span><span class="string">&quot;ppc64le&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;supported_repo_breeds&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;rsync&quot;</span><span class="punctuation">,</span> <span class="string">&quot;rhn&quot;</span><span class="punctuation">,</span> <span class="string">&quot;yum&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_file&quot;</span><span class="punctuation">:</span><span class="string">&quot;vmlinuz(.*)&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;initrd_file&quot;</span><span class="punctuation">:</span><span class="string">&quot;initrd(.*)\\.img&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;isolinux_ok&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;default_kickstart&quot;</span><span class="punctuation">:</span><span class="string">&quot;/var/lib/cobbler/kickstarts/sample_end.ks&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_options&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_options_post&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;boot_files&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<pre><code class="highlight shell"><span class="meta prompt_">#</span><span class="language-bash">重启服务</span>
systemctl restart cobblerd.service</code></pre>

<hr>
<h3 id="Ubuntu18、Ubuntu19-解决办法"><a href="#Ubuntu18、Ubuntu19-解决办法" class="headerlink" title="Ubuntu18、Ubuntu19 解决办法"></a>Ubuntu18、Ubuntu19 解决办法</h3><h4 id="Ubuntu-18-10"><a href="#Ubuntu-18-10" class="headerlink" title="Ubuntu 18.10"></a>Ubuntu 18.10</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;cosmic&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;signatures&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;dists&quot;</span><span class="punctuation">,</span> <span class="string">&quot;.disk&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version_file&quot;</span><span class="punctuation">:</span><span class="string">&quot;Release|mini-info&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version_file_regex&quot;</span><span class="punctuation">:</span><span class="string">&quot;Codename: cosmic|Ubuntu 18.10&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_arch&quot;</span><span class="punctuation">:</span><span class="string">&quot;linux-headers-(.*)\\.deb&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_arch_regex&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;supported_arches&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;i386&quot;</span><span class="punctuation">,</span><span class="string">&quot;amd64&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;supported_repo_breeds&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;apt&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_file&quot;</span><span class="punctuation">:</span><span class="string">&quot;linux(.*)&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;initrd_file&quot;</span><span class="punctuation">:</span><span class="string">&quot;initrd(.*)\\.gz&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;isolinux_ok&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;default_kickstart&quot;</span><span class="punctuation">:</span><span class="string">&quot;/var/lib/cobbler/kickstarts/sample.seed&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_options&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_options_post&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;boot_files&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<h4 id="Ubuntu-19-04"><a href="#Ubuntu-19-04" class="headerlink" title="Ubuntu 19.04"></a>Ubuntu 19.04</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;disco&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;signatures&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;dists&quot;</span><span class="punctuation">,</span> <span class="string">&quot;.disk&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version_file&quot;</span><span class="punctuation">:</span><span class="string">&quot;Release|mini-info&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version_file_regex&quot;</span><span class="punctuation">:</span><span class="string">&quot;Codename: disco|Ubuntu 19.04&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_arch&quot;</span><span class="punctuation">:</span><span class="string">&quot;linux-headers-(.*)\\.deb&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_arch_regex&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;supported_arches&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;i386&quot;</span><span class="punctuation">,</span><span class="string">&quot;amd64&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;supported_repo_breeds&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;apt&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_file&quot;</span><span class="punctuation">:</span><span class="string">&quot;linux(.*)&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;initrd_file&quot;</span><span class="punctuation">:</span><span class="string">&quot;initrd(.*)\\.gz&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;isolinux_ok&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;default_kickstart&quot;</span><span class="punctuation">:</span><span class="string">&quot;/var/lib/cobbler/kickstarts/sample.seed&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_options&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_options_post&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;boot_files&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span>，</span><br></pre></td></tr></table></figure>

<h4 id="Ubuntu-19-10"><a href="#Ubuntu-19-10" class="headerlink" title="Ubuntu 19.10"></a>Ubuntu 19.10</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;eoan&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;signatures&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;dists&quot;</span><span class="punctuation">,</span> <span class="string">&quot;.disk&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version_file&quot;</span><span class="punctuation">:</span><span class="string">&quot;Release|mini-info&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version_file_regex&quot;</span><span class="punctuation">:</span><span class="string">&quot;Codename: eoan|Ubuntu 19.10&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_arch&quot;</span><span class="punctuation">:</span><span class="string">&quot;linux-headers-(.*)\\.deb&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_arch_regex&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;supported_arches&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;i386&quot;</span><span class="punctuation">,</span><span class="string">&quot;amd64&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;supported_repo_breeds&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;apt&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_file&quot;</span><span class="punctuation">:</span><span class="string">&quot;linux(.*)&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;initrd_file&quot;</span><span class="punctuation">:</span><span class="string">&quot;initrd(.*)\\.gz&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;isolinux_ok&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;default_kickstart&quot;</span><span class="punctuation">:</span><span class="string">&quot;/var/lib/cobbler/kickstarts/sample.seed&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_options&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;kernel_options_post&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;boot_files&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<h5 id="重启服务"><a href="#重启服务" class="headerlink" title="重启服务"></a>重启服务</h5><pre><code class="highlight shell">systemctl restart cobblerd.service</code></pre>

    </div>

    
    <div class="about">
        <h1>关于本文</h1>
        <div class="details">
            <p>由 Matt Lee 撰写, 采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc/4.0">CC BY-NC 4.0</a> 许可协议.</p>
        </div>
        
        <p class="tags">
            
            <i class="icon"></i>
            <a href="/tags/cobbler/" class="tag">#cobbler</a><a href="/tags/centos/" class="tag">#centos</a><a href="/tags/linux/" class="tag">#linux</a>
        </p>
        
    </div>
    

    <div class="container post-prev-next">
        <a class="next"></a>
        
        <a href="/2025/04/03/interviews/med/" class="prev">
            <div>
                <div class="text">
                    <p class="label">上一篇</p>
                    <h3 class="title">医疗器械行业软件测试面试解析</>
                </div>
            </div>
        </a>
        
    </div>

    
        
        
        <script src="https://giscus.app/client.js"
  data-repo="thoulee21/thoulee21.github.io"
  data-repo-id="R_kgDOOIARcQ"
  data-category="General"
  data-category-id="DIC_kwDOOIARcc4CoBFg"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="preferred_color_scheme"
  data-lang="zh-CN"
  crossorigin="anonymous"
  async>
</script>

        
    
</article>

        <footer>
    <div class="inner">
        <div class="links">
            
            <div class="group">
                <h2 class="title">Blog</h2>
                
                <a href="/tags" class="item">Tags</a>
                
                <a href="/categories" class="item">Categories</a>
                
                <a href="/archives" class="item">Archives</a>
                
            </div>
            
            <div class="group">
                <h2 class="title">Projects</h2>
                
                <a target="_blank" rel="noopener" href="https://github.com/thoulee21/joint-player" class="item">Joint Player</a>
                
                <a target="_blank" rel="noopener" href="https://github.com/thoulee21/film-speak" class="item">Film Speak</a>
                
            </div>
            
            <div class="group">
                <h2 class="title">Me</h2>
                
                <a target="_blank" rel="noopener" href="https://github.com/thoulee21" class="item">GitHub</a>
                
                <a href="mailto:thou_lee@outlook.com" class="item">Email</a>
                
            </div>
            
        </div>
        <span>&copy; 2025 Matt Lee<br>由 <a href="http://hexo.io/" target="_blank">Hexo</a> 驱动 </span>
        
        <br>
        <span class="footer-extra-description">Matt Lee's Weblog - A blog about tech & life</span>
        
        
            <br>
            <div class="color-scheme-toggle" role="radiogroup" id="theme-color-scheme-toggle">
                <label>
                    <input type="radio" value="light">
                    <span>Light</span>
                </label>
                <label>
                    <input type="radio" value="dark">
                    <span>Dark</span>
                </label>
                <label>
                    <input type="radio" value="auto">
                    <span>Auto</span>
                </label>
            </div>
        
    </div>
</footer>


        
<script src="/js/main.js"></script>

        
        
        

        
    </body>
</html>